# UI é—®é¢˜åˆ†ææŠ¥å‘Š

## ğŸ” å‘ç°çš„ä¸»è¦é—®é¢˜

### âŒ é—®é¢˜ 1: Header é«˜åº¦ä¸ä¸€è‡´
**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ é«˜

**é—®é¢˜æè¿°**:
- `layoutStore` ä¸­ `header.height` é»˜è®¤å€¼æ˜¯ `48px`
- ä½† `LayoutHeader` ç»„ä»¶çš„å®é™…æ ·å¼ä½¿ç”¨äº† `header.height`
- éœ€è¦ç¡®ä¿ç»„ä»¶çš„å®é™…æ¸²æŸ“é«˜åº¦ä¸ store ä¸­çš„å€¼ä¸€è‡´

**å½±å“**:
- å¦‚æœé«˜åº¦ä¸åŒ¹é…ï¼Œä¼šå¯¼è‡´å†…å®¹è¢«é®æŒ¡æˆ–å‡ºç°ç©ºç™½

**çŠ¶æ€**: âœ… å·²éªŒè¯ - LayoutHeader æ­£ç¡®ä½¿ç”¨äº† `header.height`

---

### âŒ é—®é¢˜ 2: èœå•è·¯ç”±ä¸åŒ¹é…
**ä¸¥é‡ç¨‹åº¦**: ğŸ”´ é«˜

**é—®é¢˜æè¿°**:
åœ¨ `menuConfig.tsx` ä¸­å®šä¹‰äº†å¾ˆå¤šäºŒçº§è·¯ç”±ï¼Œä½† `router/index.tsx` ä¸­æ²¡æœ‰å¯¹åº”çš„è·¯ç”±å®šä¹‰ï¼š

**ç¼ºå¤±çš„è·¯ç”±**:
- `/dashboard/analytics` - æ•°æ®åˆ†æ
- `/rag/documents` - æ–‡æ¡£ç®¡ç†
- `/rag/query` - æ™ºèƒ½é—®ç­”
- `/user/list` - ç”¨æˆ·åˆ—è¡¨
- `/user/roles` - è§’è‰²æƒé™
- `/scheduler/workflows` - å·¥ä½œæµ
- `/system/logs` - ç³»ç»Ÿæ—¥å¿—
- `/system/monitor` - ç³»ç»Ÿç›‘æ§
- `/system/storage` - å­˜å‚¨ç®¡ç†
- `/notifications` - é€šçŸ¥ä¸­å¿ƒ

**å½±å“**:
- ç”¨æˆ·ç‚¹å‡»è¿™äº›èœå•é¡¹ä¼šå¯¼èˆªåˆ° 404 é¡µé¢
- é€ æˆç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒ

**å»ºè®®ä¿®å¤**:
1. ä¸ºæ‰€æœ‰èœå•é¡¹æ·»åŠ å ä½é¡µé¢
2. æˆ–åœ¨èœå•ä¸­æ ‡æ³¨"å¼€å‘ä¸­"

---

### âš ï¸ é—®é¢˜ 3: sidebar-mixed-nav çš„ collapsed é€»è¾‘
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¡ ä¸­

**é—®é¢˜æè¿°**:
åœ¨ `sidebar-mixed-nav` æ¨¡å¼ä¸‹ï¼š
- åº”è¯¥æœ‰å·¦åˆ—(72px å›¾æ ‡åˆ—)å’Œå³åˆ—(200px èœå•åˆ—)
- `sidebar.collapsed` åº”è¯¥åªæ§åˆ¶å³åˆ—çš„æ˜¾ç¤º/éšè—
- å·¦åˆ—åº”è¯¥å§‹ç»ˆæ˜¾ç¤º

**å½“å‰å®ç°**:
```typescript
{!sidebar.collapsed && (
  <div style={{ left: '72px', width: '200px' }}>
    {/* å³åˆ—èœå• */}
  </div>
)}
```

**é—®é¢˜**:
- `contentMarginLeft` çš„è®¡ç®—å¯èƒ½ä¸æ­£ç¡®
- å½“ `sidebar.collapsed=true` æ—¶ï¼ŒmarginLeft åº”è¯¥æ˜¯ 72px
- å½“ `sidebar.collapsed=false` æ—¶ï¼ŒmarginLeft åº”è¯¥æ˜¯ 272px

**å½“å‰ä»£ç **:
```typescript
if (isSidebarMixedNav && !sidebar.collapsed) return 272;
```
è¿™æ˜¯æ­£ç¡®çš„ï¼Œä½†éœ€è¦æ·»åŠ æŠ˜å æ—¶çš„æƒ…å†µã€‚

---

### âš ï¸ é—®é¢˜ 4: Tabbar çš„å®šä½æ–¹å¼
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¡ ä¸­

**é—®é¢˜æè¿°**:
```typescript
{tabbar.enable && (
  <div className="sticky top-0 z-[50]">
    <TabsView ... />
  </div>
)}
```

**é—®é¢˜**:
- Tabbar ä½¿ç”¨ `sticky top-0`
- ä½†å®ƒåœ¨å·²ç»æœ‰ `marginTop` çš„ Layout å†…éƒ¨
- æ»šåŠ¨æ—¶å¯èƒ½ä¼šä¸ Header é‡å 

**å»ºè®®**:
- è€ƒè™‘ä½¿ç”¨ fixed å®šä½
- æˆ–è°ƒæ•´ sticky çš„ top å€¼

---

### âš ï¸ é—®é¢˜ 5: LayoutHeader çš„å®šä½æ··ä¹±
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¡ ä¸­

**é—®é¢˜æè¿°**:
åœ¨ MainLayout ä¸­ï¼ŒHeader ä½¿ç”¨äº† `fixed` å®šä½ï¼š
```typescript
<div className="fixed top-0 left-0 right-0 z-[200]">
  <LayoutHeader />
</div>
```

ä½†åœ¨ LayoutHeader ç»„ä»¶å†…éƒ¨ï¼Œåˆä½¿ç”¨äº† `sticky` å®šä½ï¼š
```typescript
className={`${header.mode === 'fixed' || header.mode === 'auto-scroll' ? 'sticky top-0' : ''}`}
```

**é—®é¢˜**:
- å¤–å±‚å·²ç»æ˜¯ fixedï¼Œå†…å±‚å†ç”¨ sticky æ²¡æœ‰æ„ä¹‰
- åº”è¯¥ç»Ÿä¸€å®šä½æ–¹å¼

---

### âš ï¸ é—®é¢˜ 6: mixed-nav çš„ Header marginLeft
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¡ ä¸­

**é—®é¢˜æè¿°**:
åœ¨ LayoutHeader ä¸­ï¼š
```typescript
const headerMarginLeft = isMixedNav && showSidebar
  ? (sidebar.collapsed ? sidebar.collapsedWidth : sidebar.mixedWidth)
  : 0;
```

ä½†åœ¨ MainLayout ä¸­ï¼Œmixed-nav çš„é¡¶éƒ¨èœå•æ˜¯å…¨å®½çš„ï¼Œæ²¡æœ‰è€ƒè™‘ä¾§è¾¹æ ã€‚

**ä¸ä¸€è‡´æ€§**:
- LayoutHeader æœ‰ marginLeft
- ä½†é¡¶éƒ¨çš„ä¸€çº§èœå•æ²¡æœ‰ marginLeft
- è¿™ä¼šå¯¼è‡´è§†è§‰ä¸Šçš„ä¸å¯¹é½

---

### âš ï¸ é—®é¢˜ 7: z-index å±‚çº§å¯èƒ½å†²çª
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¡ ä¸­

**å½“å‰ z-index è®¾ç½®**:
- Header: `z-[200]`
- é¡¶éƒ¨èœå•: `z-[190]`
- Sidebar (mobile): `z-[1001]`
- Sidebar (mixed-nav): `z-[201]`
- Sidebar (normal): `z-[200]`
- Tabbar: `z-[50]`
- Footer (fixed): `z-[10]`

**æ½œåœ¨é—®é¢˜**:
- Sidebar åœ¨ mixed-nav ä¸‹æ˜¯ 201ï¼Œå¯èƒ½ä¼šé®æŒ¡ Header (200)
- ç§»åŠ¨ç«¯ Sidebar æ˜¯ 1001ï¼Œä¸å…¶ä»–å…ƒç´ å·®è·è¿‡å¤§

---

### â„¹ï¸ é—®é¢˜ 8: CSS å˜é‡æœªä½¿ç”¨
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¢ ä½

**é—®é¢˜æè¿°**:
åœ¨ `index.css` ä¸­å®šä¹‰äº† CSS å˜é‡ï¼š
- `--header-height`
- `--sidebar-width`
- `--tabbar-height`

ä½†åœ¨ MainLayout ä¸­ç›´æ¥ä½¿ç”¨ JS å˜é‡è€Œé CSS å˜é‡ã€‚

**å½±å“**:
- å¦‚æœå…¶ä»–ç»„ä»¶ä¾èµ– CSS å˜é‡ï¼Œå¯èƒ½ä¼šä¸ä¸€è‡´
- ä½†å½“å‰å®ç°æ˜¯é€šè¿‡ JS åŠ¨æ€è®¾ç½®ï¼Œæ‰€ä»¥ä¸æ˜¯ä¸¥é‡é—®é¢˜

---

### â„¹ï¸ é—®é¢˜ 9: LayoutSidebar åœ¨ mixed-nav çš„ top è®¡ç®—
**ä¸¥é‡ç¨‹åº¦**: ğŸŸ¢ ä½

**å½“å‰ä»£ç **:
```typescript
const sidebarMarginTop = isMixedNav && !app.isMobile ? header.height : 0;
```

**é—®é¢˜**:
- åœ¨ mixed-nav æ¨¡å¼ä¸‹ï¼Œä¾§è¾¹æ åº”è¯¥åœ¨ Header + é¡¶éƒ¨èœå•(48px) ä¸‹æ–¹
- å½“å‰åªè€ƒè™‘äº† header.height
- åº”è¯¥æ˜¯ `header.height + 48`

---

## ğŸ“Š é—®é¢˜ä¼˜å…ˆçº§æ±‡æ€»

| ä¼˜å…ˆçº§ | é—®é¢˜æ•° | é—®é¢˜ç¼–å· |
|--------|--------|----------|
| ğŸ”´ é«˜ | 1 | é—®é¢˜ 2 |
| ğŸŸ¡ ä¸­ | 5 | é—®é¢˜ 3-7 |
| ğŸŸ¢ ä½ | 2 | é—®é¢˜ 8-9 |

## ğŸ”§ å»ºè®®ä¿®å¤é¡ºåº

1. **ç«‹å³ä¿®å¤**: é—®é¢˜ 2 (èœå•è·¯ç”±ä¸åŒ¹é…) - æ·»åŠ å ä½é¡µé¢
2. **é‡è¦ä¿®å¤**: é—®é¢˜ 5 (Header å®šä½æ··ä¹±) - ç»Ÿä¸€å®šä½æ–¹å¼
3. **é‡è¦ä¿®å¤**: é—®é¢˜ 3 (sidebar-mixed-nav collapsed é€»è¾‘)
4. **ä¼˜åŒ–**: é—®é¢˜ 4, 6, 7 (Tabbar å®šä½ã€marginLeft ä¸€è‡´æ€§ã€z-index)
5. **å¯é€‰**: é—®é¢˜ 8, 9 (CSS å˜é‡ã€marginTop è®¡ç®—)

## âœ… éªŒè¯è‰¯å¥½çš„éƒ¨åˆ†

1. âœ… Header é«˜åº¦è®¾ç½®æ­£ç¡®
2. âœ… åŸºæœ¬å¸ƒå±€åˆ‡æ¢é€»è¾‘æ­£ç¡®
3. âœ… èœå•é…ç½®ç³»ç»Ÿå®Œå–„
4. âœ… çŠ¶æ€ç®¡ç†ç»“æ„æ¸…æ™°
5. âœ… å“åº”å¼è®¾è®¡è€ƒè™‘å‘¨å…¨
